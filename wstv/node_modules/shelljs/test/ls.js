function numLines(e){return typeof e=="string"?e.match(/\n/g).length:0}var shell=require(".."),assert=require("assert"),path=require("path"),fs=require("fs");fs.existsSync=fs.existsSync||path.existsSync,shell.silent(!0),shell.rm("-rf","tmp"),shell.mkdir("tmp"),assert.equal(fs.existsSync("/asdfasdf"),!1);var result=shell.ls("/asdfasdf");assert.ok(shell.error()),assert.equal(result.length,0);var result=shell.ls();assert.equal(shell.error(),null);var result=shell.ls("/");assert.equal(shell.error(),null),shell.cd("resources/ls");var result=shell.ls();assert.equal(shell.error(),null),assert.equal(result.indexOf("file1")>-1,!0),assert.equal(result.indexOf("file2")>-1,!0),assert.equal(result.indexOf("file1.js")>-1,!0),assert.equal(result.indexOf("file2.js")>-1,!0),assert.equal(result.indexOf("filename(with)[chars$]^that.must+be-escaped")>-1,!0),assert.equal(result.indexOf("a_dir")>-1,!0),assert.equal(result.length,6),shell.cd("../..");var result=shell.ls("resources/ls");assert.equal(shell.error(),null),assert.equal(result.indexOf("file1")>-1,!0),assert.equal(result.indexOf("file2")>-1,!0),assert.equal(result.indexOf("file1.js")>-1,!0),assert.equal(result.indexOf("file2.js")>-1,!0),assert.equal(result.indexOf("filename(with)[chars$]^that.must+be-escaped")>-1,!0),assert.equal(result.indexOf("a_dir")>-1,!0),assert.equal(result.length,6),shell.cd("resources/ls");var result=shell.ls("-a");assert.equal(shell.error(),null),assert.equal(result.indexOf("file1")>-1,!0),assert.equal(result.indexOf("file2")>-1,!0),assert.equal(result.indexOf("file1.js")>-1,!0),assert.equal(result.indexOf("file2.js")>-1,!0),assert.equal(result.indexOf("filename(with)[chars$]^that.must+be-escaped")>-1,!0),assert.equal(result.indexOf("a_dir")>-1,!0),assert.equal(result.indexOf(".hidden_file")>-1,!0),assert.equal(result.indexOf(".hidden_dir")>-1,!0),assert.equal(result.length,8),shell.cd("../..");var result=shell.ls("resources/ls/*");assert.equal(shell.error(),null),assert.equal(result.indexOf("resources/ls/file1")>-1,!0),assert.equal(result.indexOf("resources/ls/file2")>-1,!0),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0),assert.equal(result.indexOf("resources/ls/filename(with)[chars$]^that.must+be-escaped")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir")>-1,!0),assert.equal(result.length,6);var result=shell.ls("resources/ls/.*");assert.equal(shell.error(),null),assert.equal(result.indexOf("resources/ls/.hidden_file")>-1,!0),assert.equal(result.indexOf("resources/ls/.hidden_dir")>-1,!0),assert.equal(result.length,2);var result=shell.ls("resources/ls/f*le*");assert.equal(shell.error(),null),assert.equal(result.length,5),assert.equal(result.indexOf("resources/ls/file1")>-1,!0),assert.equal(result.indexOf("resources/ls/file2")>-1,!0),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0),assert.equal(result.indexOf("resources/ls/filename(with)[chars$]^that.must+be-escaped")>-1,!0);var result=shell.ls("resources/ls/f*le*.js");assert.equal(shell.error(),null),assert.equal(result.length,2),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0);var result=shell.ls("resources/ls/*.j");assert.equal(shell.error(),null),assert.equal(result.length,0);var result=shell.ls("resources/ls/*.*");assert.equal(shell.error(),null),assert.equal(result.length,3),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0),assert.equal(result.indexOf("resources/ls/filename(with)[chars$]^that.must+be-escaped")>-1,!0);var result=shell.ls("resources/ls/f*le*.js","resources/ls/a_dir");assert.equal(shell.error(),null),assert.equal(result.length,4),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0),assert.equal(result.indexOf("b_dir")>-1,!0),assert.equal(result.indexOf("nada")>-1,!0);var result=shell.ls("resources/ls/f*le*.js","resources/ls/a_dir/*");assert.equal(shell.error(),null),assert.equal(result.length,4),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir/b_dir")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir/nada")>-1,!0);var result=shell.ls(["resources/ls/f*le*.js","resources/ls/a_dir/*"]);assert.equal(shell.error(),null),assert.equal(result.length,4),assert.equal(result.indexOf("resources/ls/file1.js")>-1,!0),assert.equal(result.indexOf("resources/ls/file2.js")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir/b_dir")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir/nada")>-1,!0),shell.cd("resources/ls");var result=shell.ls("-R");assert.equal(shell.error(),null),assert.equal(result.indexOf("a_dir")>-1,!0),assert.equal(result.indexOf("a_dir/b_dir")>-1,!0),assert.equal(result.indexOf("a_dir/b_dir/z")>-1,!0),assert.equal(result.length,9),shell.cd("../..");var result=shell.ls("-R","resources/ls");assert.equal(shell.error(),null),assert.equal(result.indexOf("a_dir")>-1,!0),assert.equal(result.indexOf("a_dir/b_dir")>-1,!0),assert.equal(result.indexOf("a_dir/b_dir/z")>-1,!0),assert.equal(result.length,9);var result=shell.ls("-Ra","resources/ls");assert.equal(shell.error(),null),assert.equal(result.indexOf("a_dir")>-1,!0),assert.equal(result.indexOf("a_dir/b_dir")>-1,!0),assert.equal(result.indexOf("a_dir/b_dir/z")>-1,!0),assert.equal(result.indexOf("a_dir/.hidden_dir/nada")>-1,!0),assert.equal(result.length,14);var result=shell.ls("-R","resources/ls/*");assert.equal(shell.error(),null),assert.equal(result.indexOf("resources/ls/a_dir")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir/b_dir")>-1,!0),assert.equal(result.indexOf("resources/ls/a_dir/b_dir/z")>-1,!0),assert.equal(result.length,9),shell.exit(123);