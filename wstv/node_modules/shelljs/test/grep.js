function numLines(e){return typeof e=="string"?e.match(/\n/g).length:0}var shell=require(".."),assert=require("assert"),path=require("path"),fs=require("fs");fs.existsSync=fs.existsSync||path.existsSync,shell.silent(!0),shell.rm("-rf","tmp"),shell.mkdir("tmp"),shell.grep(),assert.ok(shell.error()),shell.grep(/asdf/g),assert.ok(shell.error()),assert.equal(fs.existsSync("/asdfasdf"),!1),shell.grep(/asdf/g,"/asdfasdf"),assert.ok(shell.error());var result=shell.grep("line","resources/a.txt");assert.equal(shell.error(),null),assert.equal(result.split("\n").length-1,4);var result=shell.grep("-v","line","resources/a.txt");assert.equal(shell.error(),null),assert.equal(result.split("\n").length-1,8);var result=shell.grep("line one","resources/a.txt");assert.equal(shell.error(),null),assert.equal(result,"This is line one\n");var result=shell.grep(/test/,"resources/file1.txt","resources/file2.txt");assert.equal(shell.error(),null),assert.equal(result,"test1\ntest2\n");var result=shell.grep(/test/,["resources/file1.txt","resources/file2.txt"]);assert.equal(shell.error(),null),assert.equal(result,"test1\ntest2\n"),shell.exit(123);